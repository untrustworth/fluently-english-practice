flowchart TD
    Start([ğŸš€ ã‚¢ãƒ—ãƒªèµ·å‹•]) --> Home[ğŸ  ãƒ›ãƒ¼ãƒ ç”»é¢<br/>- Fluentlyãƒ­ã‚´ç”»åƒ<br/>- ä¼šè©±ã‚’ã¯ã˜ã‚ã‚‹ãƒœã‚¿ãƒ³<br/>- ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é¸ã¶ãƒœã‚¿ãƒ³<br/>- è¨­å®šãƒœã‚¿ãƒ³<br/>â€»å…¨ãƒœã‚¿ãƒ³åŒä¸€ã‚µã‚¤ã‚ºãƒ»åŠé€æ˜]

    Home --> RandomConv[ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³<br/>è‡ªå‹•é¸æŠ]
    Home --> Scenario[ğŸ“‹ ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³é¸æŠç”»é¢<br/>- ãƒ—ãƒªã‚»ãƒƒãƒˆä¸€è¦§<br/>- æ–°è¦ç™»éŒ²<br/>- ã‚«ã‚¹ã‚¿ãƒ è¿½åŠ ãƒœã‚¿ãƒ³]
    Home --> Admin[âš™ï¸ è¨­å®šç”»é¢]

    RandomConv --> StartConv[ğŸ¯ ä¼šè©±é–‹å§‹]

    Scenario --> PresetSelected{é¸æŠæ–¹æ³•ã¯ï¼Ÿ}
    PresetSelected -->|ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¯ãƒªãƒƒã‚¯| StartConv
    PresetSelected -->|ã‚«ã‚¹ã‚¿ãƒ | Custom[âœï¸ ã‚«ã‚¹ã‚¿ãƒ å…¥åŠ›<br/>- ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›<br/>- èª¬æ˜ã‚’å…¥åŠ›<br/>- ã‚«ã‚¹ã‚¿ãƒ è¿½åŠ ãƒœã‚¿ãƒ³]
    Custom --> AutoAdd[ğŸ’¾ ä¸€è¦§ã«è‡ªå‹•è¿½åŠ ]
    AutoAdd --> ClickAdded[ğŸ‘† è¿½åŠ ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯]
    ClickAdded --> StartConv

    StartConv --> Conv[ğŸ’¬ ä¼šè©±ç”»é¢<br/>- (ğŸ )çµ‚äº† | ç¾åœ¨:ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ | (ğŸ²)æ¬¡ã®ä¼šè©±<br/>- æ—¥æœ¬èªãƒ’ãƒ³ãƒˆå…¥åŠ›ã‚¨ãƒªã‚¢<br/>- éŸ³å£°å…¥åŠ›ãƒœã‚¿ãƒ³<br/>- ä¼šè©±ãƒ­ã‚°è¡¨ç¤ºãƒœã‚¿ãƒ³ï¼ˆæŠ¼ä¸‹ä¸­ã®ã¿ï¼‰<br/>- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼æ³¨æ„æ›¸ã]

    Conv --> Speaking{ğŸ¤ éŸ³å£°å…¥åŠ›ä¸­}
    Speaking --> Processing[â³ AIå‡¦ç†ä¸­<br/>ï¼ˆ1.5ç§’çŒ¶äºˆæ™‚é–“ä»˜ãï¼‰]
    Processing --> WaitRecording[â³ éŒ²éŸ³çµ‚äº†å¾…æ©Ÿ<br/>è‡ªç„¶ãªä¼šè©±ãƒªã‚ºãƒ ]
    WaitRecording --> Response[ğŸ”Š éŸ³å£°å¿œç­”<br/>- éŸ³å£°å‡ºåŠ›ã®ã¿<br/>- å¿œç­”æ–‡å­—å¹•ãªã—]
    Response --> Conv
    
    Conv --> HintBtn{ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’å–å¾—ãƒœã‚¿ãƒ³}
    HintBtn -->|æŠ¼ä¸‹| HintProcess[â³ ç¿»è¨³å‡¦ç†ä¸­<br/>æ—¥æœ¬èªâ†’è‹±èª<br/>Gemini 2.0 Flash]
    HintProcess --> HintResult[âœ¨ è‹±èªè¡¨ç¾ææ¡ˆ<br/>ç”»é¢å†…ã«çµæœè¡¨ç¤º]
    HintResult --> Conv

    Conv --> LogView{ä¼šè©±ãƒ­ã‚°ã‚’è¡¨ç¤ºãƒœã‚¿ãƒ³<br/>æŠ¼ä¸‹ä¸­ï¼Ÿ}
    LogView -->|Yes| ShowLog[ğŸ“œ ä¼šè©±ãƒ­ã‚°è¡¨ç¤º<br/>- å…¨ä¼šè©±å±¥æ­´ï¼ˆè·å“¡ãƒ»è¦³å…‰å®¢ï¼‰<br/>- ãƒœã‚¿ãƒ³ã‚’é›¢ã™ã¨éè¡¨ç¤º]
    LogView -->|No| Conv
    ShowLog --> Conv

    Conv --> NextConvBtn{ğŸ² æ¬¡ã®ä¼šè©±ãƒœã‚¿ãƒ³ï¼Ÿ}
    NextConvBtn -->|æŠ¼ä¸‹| NextConvProcess[ğŸ”„ ä¼šè©±ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢<br/>+ ãƒ©ãƒ³ãƒ€ãƒ ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³é¸æŠ]
    NextConvProcess --> NewConvStart[ğŸ¯ æ–°ã—ã„ä¼šè©±é–‹å§‹<br/>ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºæ›´æ–°]
    NewConvStart --> Response
    NextConvBtn -->|æœªæŠ¼ä¸‹| EndConv{ä¼šè©±çµ‚äº†ï¼Ÿ}
    
    Conv --> EndConv
    EndConv -->|ç¶šè¡Œ| Conv
    EndConv -->|çµ‚äº†| DataCleanup[ğŸ—‘ï¸ ä¼šè©±ãƒ‡ãƒ¼ã‚¿å®Œå…¨å‰Šé™¤<br/>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·]
    DataCleanup --> Home

    Admin --> AdminMenu[ğŸ“Š è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼<br/>- ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š<br/>- éŸ³é‡ãƒ»ãã®ä»–<br/>- æˆ»ã‚‹]
    AdminMenu --> ScenarioMgmt[ğŸ“ ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†<br/>- ä¸€è¦§è¡¨ç¤ºï¼ˆã‚«ã‚¹ã‚¿ãƒ è¿½åŠ åˆ†å«ã‚€ï¼‰<br/>- ç·¨é›†ãƒ»å‰Šé™¤<br/>- ä¿å­˜ãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™]
    AdminMenu --> Settings[âš™ï¸ è¨­å®šç”»é¢<br/>- APIã‚­ãƒ¼è¨­å®šãƒ»å‰Šé™¤<br/>- éŸ³å£°è¨­å®šï¼ˆè©±é€Ÿãƒ»éŸ³é‡ï¼‰<br/>- ä½¿ç”¨çµ±è¨ˆè¡¨ç¤º]

    ScenarioMgmt --> EditScenario[âœï¸ ç·¨é›†ç”»é¢<br/>- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º<br/>- ä¿®æ­£ãƒ»ä¿å­˜]

    EditScenario --> ScenarioMgmt
    Settings --> AdminMenu
    ScenarioMgmt --> AdminMenu
    AdminMenu --> Home

    %% ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
    Processing --> Error{ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿï¼Ÿ}
    Error -->|API Limit| LimitMsg[âš ï¸ ä½¿ç”¨é‡åˆ¶é™<br/>ã—ã°ã‚‰ãå¾Œã«ãŠè©¦ã—ãã ã•ã„<br/>- ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³]
    Error -->|API Error| ErrorMsg[âŒ APIã‚¨ãƒ©ãƒ¼<br/>ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„<br/>- ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®ã¿]
    Error -->|Input Error| InputError[ğŸ”’ å…¥åŠ›ã‚¨ãƒ©ãƒ¼<br/>ä¸æ­£ãªå…¥åŠ›ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ<br/>- å†å…¥åŠ›ãƒœã‚¿ãƒ³]
    Error -->|Success| Response
    LimitMsg --> Home
    ErrorMsg --> Home
    InputError --> Conv

    %% ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef screen fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef process fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef auto fill:#e3f2fd,stroke:#1565c0,stroke-width:2px

    class Start,EndConv startEnd
    class Home,Scenario,Custom,Conv,Admin,AdminMenu,ScenarioMgmt,Settings,EditScenario,ShowLog,HintInput,HintResult screen
    class StartConv,Speaking,Processing,WaitRecording,Response,RandomConv,HintProcess process
    class ClickAdded process
    class PresetSelected,Error,LogView,HintBtn decision
    class ErrorMsg error
    class AutoAdd,DataCleanup auto
    class LimitMsg,InputError error